<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Cafetera de DAW</title>
    <link
      rel="stylesheet"
      href="https://code.jquery.com/qunit/qunit-1.18.0.css"
    />
    <link
      rel="stylesheet"
      href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css"
    />
  </head>
  <body style="margin: 0 1em;">
    <div id="main">
      <h1>Cafetera de DAW <em>Calculadora de Cambio</em></h1>
      <h2>
        Calcula el cambio en (<em>monedas</em>) a devolver cuando compramos
        algo.
      </h2>
    </div>

    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <!--Cargamos el entorno de pruebas qunit -->
    <script src="https://code.jquery.com/qunit/qunit-1.18.0.js"></script>
    <script>
      /* // Ejemplo de que todo va
      test("Esto siempre funcionara", function(assert) {
        var result = 1 + 1;
        assert.equal(result, 2);
      });
      // Un fallo estar√° en rojito
      test("Un fallo", function(assert) {
        var result = [1, 2, 3].indexOf(1);
        assert.equal(result, -1);
      }); */


      test("No le meto nada", function(assert) {
        var result = debuelveCambio();
        assert.equal(result, 0);
      });

      /* test("Dinero insuficiente", function(assert) {
        var result = debuelveCambio(20,10);
        assert.equal(result, -1);
      }); */

      test("Dinero justo", function(assert) {
        var result = debuelveCambio(0, 0);
        assert.deepEqual(result, []);
      });

      test("Dinero Juesto 2", function(assert) {
        var result = debuelveCambio(40, 40);
        assert.deepEqual(result, []);
      });

      test("Cambio", function(assert) {
        var result = debuelveCambio(45,100);
        assert.deepEqual(result, [50,5]);
      });


      /* test("", function(assert) {
        var result = debuelveCambio(20, 40);
        assert.equal(result, [20]);
      });
 */



      function debuelveCambio(totalPrecio, introducido) {
        var monedas = [200, 100, 50, 20, 10, 5, 2, 1,];
        var subtotal = totalPrecio - introducido;
        var cambio = [];

        /* cantidad de monedas de esa cantidad */
        var cant;

        // TODO aniadir: and subtotal !=0 
        for (let i = 0; i < monedas.length ; i++) {

          // Obtenemos las monedas necesarias
          cant = subtotal % monedas[i];
          // y se las restamos al subtotal
          subtotal = subtotal - cant * monedas[i];
          
          for (let f = 0; f < cant; f++) {
            cambio.push(monedas[i]);
            
          }

          
        }

        return cambio;
      }

      
    </script>
  </body>
</html>
